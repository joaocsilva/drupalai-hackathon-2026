{#
/**
 * @file
 * Template for displaying similar content linking opportunities.
 *
 * Available variables:
 * - current_node: The current node being viewed.
 * - similar_nodes: Array of similar nodes with the following keys:
 *   - nid: Node ID
 *   - title: Node title
 *   - url: Node URL
 *   - similarity: Similarity score
 *   - excerpt: Text excerpt from the node
 */
#}
<div class="similar-content-linking">
  <div class="similar-content-linking__header">
    <h2>{{ 'Link Opportunities'|t }}</h2>
    <p class="similar-content-linking__description">
      {{ 'These pages have similar content and might be good candidates for internal linking.'|t }}
    </p>
  </div>

  {% if similar_nodes is empty %}
    <div class="similar-content-linking__empty">
      <p>{{ 'No similar content found for linking opportunities.'|t }}</p>
    </div>
  {% else %}
    <div class="similar-content-linking__list">
      {% for node in similar_nodes %}
        <div class="similar-content-linking__item">
          <div class="similar-content-linking__item-header">
            <h3 class="similar-content-linking__item-title">
              <a href="{{ node.url }}">{{ node.title }}</a>
            </h3>
            {% if node.similarity %}
              <span class="similar-content-linking__similarity-score" title="{{ 'Similarity score'|t }}">
                {{ (node.similarity * 100)|number_format(0) }}% {{ 'match'|t }}
              </span>
            {% endif %}
          </div>

          {% if node.excerpt %}
            <div class="similar-content-linking__excerpt">
              {{ node.excerpt|raw }}
            </div>
          {% endif %}

          <div class="similar-content-linking__actions">
            <a href="{{ node.url }}" class="similar-content-linking__action-link">
              {{ 'View content'|t }}
            </a>
            <button
              class="similar-content-linking__copy-link"
              data-node-id="{{ node.nid }}"
              data-node-url="{{ node.url }}"
              data-node-title="{{ node.title }}"
              title="{{ 'Copy link markup'|t }}">
              {{ 'Copy link'|t }}
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>
